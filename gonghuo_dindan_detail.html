<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<meta name="keywords" content=" ">
		<meta name="description" content=" ">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="font-awesome-4.7.0/css/font-awesome.min.css" />
		<link rel="stylesheet" type="text/css" href="css/zui.min.css" />
		<link rel="stylesheet" type="text/css" href="css/css.css" />
		<link rel="stylesheet" type="text/css" href="css/scarlett.css" />
	</head>

	<body>
		<h3 class="col-md-12 title "><a class="dthis" href="">订货单</a><span class="bread">&gt;</span><a href="">订单详情</a></h3>
		<div class="col-md-12 con ">
			<div class="panel panel-default">
				<div class="wrap1">
					<div class="goods_detal_blok">
						<div class="goods_detal_list">
							<label>获取客户名称</label><label>-获取客户类型</label>
						</div>
						<div class="goods_detal_list">
							<label>订单号：</label><span>34234</span>
						</div>
						<div class="goods_detal_list">
							<label>结算方式：</label><span>测试数据</span>
						</div>
						<div class="goods_detal_list">
							<label>获取业务员</label><label>-获取来源</label><label>-获取设备</label>
						</div>
						<div class="goods_detal_list">
							<label>地区：</label><span>测试数据</span>
						</div>
						<div class="goods_detal_list">
							<label>联系人：</label><span>测试数据</span>
						</div>
						<div class="goods_detal_list">
							<label>下单时间：</label><span>2016-12-15 14:30</span>
						</div>
						<div class="goods_detal_list">
							<label>付款状态：</label><span>待付款测试</span>
						</div>
						<div class="goods_detal_list">
							<label>订单状态：</label><span>待审核测试</span>
						</div>
					</div>
				</div>
				<div class="fund-table1">
					<h2>商品信息</h2>
					<div class="goods_table_head">
						<div class="table_headL">
							<label><input type="checkbox"/>按下单时间排序</label>
							<label><input type="checkbox"/>按商品分类排序</label>
						</div>
						<div class="table_headR">
							<div class="table_headRL">
								<a class="print1" href="#"><i class="fa fa-copy"></i>复制订单</a>
								<a class="print" href="#"><i class="fa fa-print"></i>打印</a>
								<a class="export" href="#"><i class="fa  fa-upload"></i>导出</a>
							</div>
							<div class="table_headRR">
								<button class="cancel" type="button">取消订单</button>
								<button class="pass" type="button">通过审核</span>
							</div>
						</div>
					</div>
					<table class="table table-cus">
						<thead>
							<tr>
								<th></th>
								<th width="20%">商品</th>
								<th>商品规格</th>
								<th>单位</th>
								<th>可售库存</th>
								<th>辅助数量</th>
								<th>订购数量</th>
								<th>单价</th>
								<th>小计</th>
								<th>备注</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1</td>
								<td>
									<div class="detail_block">
										<img src="img/goods.png" alt="" />
										<p class="list-link1">10094</p>
										<a class="list-link2" title="百年纪念高跟鞋2016夏季新款单鞋细跟女鞋尖头鞋子呵呵1">百年纪念高跟鞋2016夏季新款单鞋细跟女鞋尖头鞋子呵呵1</a>
									</div>
								</td>
								<td>酒红色</td>
								<td>个</td>
								<td>99</td>
								<td>2</td>
								<td><div class="cfs pull-left"><a class="jian">-</a><input class="lskdo" type="text" value="2"><a class="jia">+</a></div></td>
								<td>33.5</td>
								<td>33.5</td>
								<td><textarea></textarea></td>
							</tr>
							<tr>
								<td>2</td>
								<td>
									<div class="detail_block">
										<img src="img/goods.png" alt="" />
										<p class="list-link1">10094</p>
										<a class="list-link2" title="百年纪念高跟鞋2016夏季新款单鞋细跟女鞋尖头鞋子呵呵2">百年纪念高跟鞋2016夏季新款单鞋细跟女鞋尖头鞋子呵呵2</a>
									</div>
								</td>
								<td>酒红色</td>
								<td>个</td>
								<td>233</td>
								<td>3</td>
								<td><div class="cfs pull-left"><a class="jian">-</a><input class="lskdo" type="text" value="3"><a class="jia">+</a></div></td>
								<td>100</td>
								<td>100</td>
								<td><textarea></textarea></td>
							</tr>
						</tbody>
					</table>
					<div class="desCont">
						<div class="desContR">
							<div class="desContRC">
								<span>数量合计：</span>
								<span class="desContRCC">
									<em class="goods_total_num">0</em>
								</span>
							</div>
							<div class="desContRC">
								<span>商品合计：</span>
								<span class="desContRCC">
									<em class="goods_kind_num">0</em>
								</span>
							</div>
							<div class="desContRC">
								<span>运&nbsp;&nbsp;&nbsp;费：<i class="glyphicon glyphicon-edit"></i></span>
								<span class="desContRCC">
									<b>￥</b><input value="0"/>
								</span>
							</div>
							<div class="desContRC">
								<label><input type="checkbox"/>是否特批价</label>
								<span>订单总额：</span>
								<span class="desContRCC">
									<b class="redColor">￥</b><em class="redColor goods_total_price">0.00</em>
								</span>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-hed2">
					<h4>备注</h4>
					<div class="btfContD">
						<span>订单备注：</span>
						<input />
					</div>
					<div class="btfContU">
						<span>内部沟通：</span>
						<input />
					</div>
				</div>
				<div class="modal-hed2">
					<h4>发票</h4>
					<div class="btfContD">
						<span>发票类型：</span>
						<input />
					</div>
				</div>
				<div class="modal-hed2">
					<h4>交货</h4>
					<div class="btfContD">
						<span>配送方式：</span>
						<select name="">
							<option>测试测试1</option>
							<option>测试测试2</option>							
						</select>
					</div>
					<div class="btfContU">
						<span><i class="red">*</i>收货地址：</span>
						<input class="address" required="true"/>
					</div>
				</div>
				<div class="modal-hed2">
					<h4>附件</h4>
					<div class="btfContD">
						<div class="btfContDBtn">
							<span class="btn">+附件</span><i class="fa fa-question" title="附件最大为 6MB，支持格式：PDF、DOC、DOCX、XLS、XLSX、TXT、JPG、JPEG、PNG、RAR、ZIP "></i>
						</div>
					</div>
				</div>
				<div class="bottomTablCont" >
					<h2>操作日志<i class="fa fa-caret-down"></i></h2>
					<div class="bottomTablBlock">
					<table class="table table-cus">
						<thead>
							<tr>
								<th>操作时间</th>
								<th>操作人员</th>
								<th>操作类型</th>
								<th>操作日志</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>2016-12-10 17:10</td>
								<td>订货宝</td>
								<td>创建入库单</td>
								<td ></td>
							</tr>
						</tbody>
					</table>						
					</div>
				</div>
			</div>

		</div>
		
		<!--弹窗-->
		<div class="dialog modal fade js-message-modal in inventoryConfirm" style="display: none;">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">入库单</h4>
					</div>
					<div class="modal-body">
						<h4 class="text-center">确定审核通过?</h4></div>
					<div class="modal-footer">
						<button type="button" class="btn btn-info">确定</button>
						<button type="button" class="btn btn-default">取消</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-backdrop fade in inventoryConfirmBak" style="display: none;"></div>

		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
				<script type="text/javascript">
					$(document).ready(function() {

						var goods_detal_listStr=$(".goods_detal_blok .goods_detal_list:last-child").find("span").text();
						if(goods_detal_listStr=="已审核"){
							$(".table_headRR").css("display","none");
						}else{
							$(".table_headRR").css("display","block");
						}
						
						/*取消和通过审核操作*/
						$(".table_headRR .cancel").click(function() {
							$(".inventoryConfirm").css("display","block");
							$(".inventoryConfirmBak").css("display","block");
							$(".inventoryConfirm .modal-header h4").html("取消入库单");
							$(".inventoryConfirm .modal-body h4").html('确定取消该入库单！<br><div class="m-t-20 padder"><textarea class="form-control l-h-30" name="cancel_reason" id="cancel_reason" placeholder="请输入备注" value="" cols="50" rows="3"></textarea></div>');
							
						})
						$(".table_headRR .pass").click(function() {
							if($(".address").length>0) {
								if($(".address").val()){
									$(".inventoryConfirm").css("display", "block");
									$(".inventoryConfirmBak").css("display", "block");
									$(".inventoryConfirm .modal-header h4").html("入库单");
									$(".inventoryConfirm .modal-body h4").html('确定审核通过?');
								}else {
									$(".address").focus();
									$(".address").attr("placeholder", "请填写地址！");
								}
							}else{
								$(".inventoryConfirm").css("display", "block");
								$(".inventoryConfirmBak").css("display", "block");
								$(".inventoryConfirm .modal-header h4").html("入库单");
								$(".inventoryConfirm .modal-body h4").html('确定审核通过?');
							}
						})
						$(".inventoryConfirm .btn.btn-default").click(function(){
							$(".inventoryConfirm").css("display","none");
							$(".inventoryConfirmBak").css("display","none");
						})
						
						/*编写商品数量*/
						editNumber();
						function editNumber(){
							$(".lskdo").on("mouseout",function(){
								var lsoek_pre=$(this).parent().parent().prev();
								var lsoek_entity=$(lsoek_pre).prev();
								var lsoek = $(this);
								var lskoe = parseInt(lsoek.val());
								if(lskoe){
									if(lskoe<parseInt($(lsoek_entity).text())){
										lsoek.val(lskoe);
										$(lsoek_pre).html(lskoe);
									}else{
										lskoe = parseInt($(lsoek_entity).text());
										lsoek.val(lskoe);
										$(lsoek_pre).html(lskoe);
									}
									lskoe = parseInt(lsoek.val());
									$(lsoek_pre).html(lskoe);
								}else{
									lsoek.val(1);
									lskoe=1;
									$(lsoek_pre).html(lskoe);
								}
								priceTalNum();
							}).on("keyup",function(){
								var lsoek_pre=$(this).parent().parent().prev();
								var lsoek_entity=$(lsoek_pre).prev();
								var lsoek = $(this);
								var lskoe = parseInt(lsoek.val());
								if(lskoe){
									if(lskoe<parseInt($(lsoek_entity).text())){
										lsoek.val(lskoe);
										$(lsoek_pre).html(lskoe);
									}else{
										lskoe = parseInt($(lsoek_entity).text());
										lsoek.val(lskoe);
										$(lsoek_pre).html(lskoe);
									}
								}else if(lskoe==0){
									lsoek.val(1);
									lskoe = 1;
									$(lsoek_pre).html(lskoe);
								}
								priceTalNum();
							});
						}
						
						/*商品数量的加减*/				
						plusMinus();
						function plusMinus() {
							$(".jian").prop('onclick', null).off('click').click(function() {
								var lsoek = $(this).parent().find(".lskdo");
								var lsoek_pre=$(this).parent().parent().prev();
								var lsoek_entity=$(lsoek_pre).prev();
								var lskoe = parseInt(lsoek.val());
								if(lskoe){
									lskoe = parseInt(lsoek.val());
									if(lskoe>1){
										lskoe--;
										lsoek.val(lskoe);
									}else{
										lsoek.val(lskoe);
									}
								}else{
									lsoek.val(1);
									lskoe=1;
								}
								$(lsoek).val(lskoe);
								lsoek_pre.html(lskoe);
								priceTalNum();
							})
							
							$(".jia").prop('onclick', null).off('click').click(function(e, iiii) {
								var lsoek = $(this).parent().find(".lskdo");
								var lsoek_pre=$(this).parent().parent().prev();
								var lsoek_entity=$(lsoek_pre).prev();
								var lskoe = parseInt(lsoek.val());
								if(lskoe){
									if(lskoe<parseInt($(lsoek_entity).text())){
										lskoe = parseInt(lsoek.val())+1;
									}else{
										lskoe = parseInt($(lsoek_entity).text());
									}
								}else{
									lsoek.val(1);
									lskoe=1;
								}
								$(lsoek).val(lskoe);
								lsoek_pre.html(lskoe);
								priceTalNum();
							})
							
						}
						
						/*数量价格计算*/
						priceTalNum();
						function priceTalNum(){
							var goods_num_td=$("table tbody tr td:nth-child(7)");
							var goods_numbers_ary=[];
							var goods_price_td=$("table tbody tr td:nth-child(8)");
							var goods_price_ary=[];
							var goods_price_total=0;
							var goods_number_total=0;
							for(var s=0;s<goods_num_td.length;s++){
								var goods_numbers_this=parseInt($(goods_num_td[s]).find("input").val());
								goods_numbers_ary.push(goods_numbers_this);
								goods_number_total+=goods_numbers_this;
							}
							for(var s1=0;s1<goods_price_td.length;s1++){
								var goods_price_this=parseFloat($(goods_price_td[s1]).text());
								goods_price_ary.push(goods_price_this);
							}
							for(var s3=0;s3<goods_price_td.length;s3++){
								goods_price_total+=(parseInt(goods_numbers_ary[s3])*parseFloat(goods_price_ary[s3]));
							}
							$(".goods_total_num").html(goods_number_total);
							$(".goods_kind_num").html(goods_num_td.length);
							$(".goods_total_price").html(goods_price_total.toFixed(2));
						}
						
					})
				</script>
	</body>

</html>